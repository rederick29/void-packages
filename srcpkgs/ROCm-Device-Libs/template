# Template file for 'ROCm-Device-Libs'
pkgname=ROCm-Device-Libs
version=6.0.2
revision=1
archs="x86_64"
build_style=cmake
configure_args="-Wno-dev -B . -DCMAKE_C_COMPILER=/opt/rocm/llvm/bin/clang -DCMAKE_CXX_COMPILER=/opt/rocm/llvm/bin/clang++ -DCMAKE_LINKER=/opt/rocm/llvm/bin/ld.lld -DCMAKE_INSTALL_PREFIX=/opt/rocm -DLLVM_DIR=/opt/rocm/lib/llvm/lib/cmake/llvm -DCMAKE_INSTALL_LIBDIR=lib -DAMDGPU_TARGETS=$(vopt_if gfx803 'gfx803;')$(vopt_if gfx900 'gfx900;')$(vopt_if gfx906 'gfx906;')$(vopt_if gfx908 'gfx908;')$(vopt_if gfx90a 'gfx90a;')$(vopt_if gfx940 'gfx940;')$(vopt_if gfx941 'gfx941;')$(vopt_if gfx942 'gfx942;')$(vopt_if gfx1010 'gfx1010;')$(vopt_if gfx1011 'gfx1011;')$(vopt_if gfx1012 'gfx1012;')$(vopt_if gfx1030 'gfx1030;')$(vopt_if gfx1031 'gfx1031;')$(vopt_if gfx1100 'gfx1100;')$(vopt_if gfx1101 'gfx1101;')$(vopt_if gfx1102 'gfx1102;')"
hostmakedepends="rocm-llvm cmake rocm-cmake"
makedepends="zlib-devel"
depends="ROCm-core rocm-cmake"
short_desc="Radeon Open Compute device libraries"
maintainer="Erick Vilcica <erick.vilcica@protonmail.com>"
license="NCSA"
homepage="https://github.com/RadeonOpenCompute/ROCm-Device-Libs"
distfiles="https://github.com/RadeonOpenCompute/ROCm-Device-Libs/archive/rocm-${version}.tar.gz"
checksum=c6d88b9b46e39d5d21bd5a0c1eba887ec473a370b1ed0cebd1d2e910eedc5837

# Targets might not matter for this package. I think it builts all either way
build_options="gfx803 gfx900 gfx906 gfx908 gfx90a gfx940 gfx941 gfx942 gfx1010 gfx1011 gfx1012 gfx1030 gfx1031 gfx1100 gfx1101 gfx1102"

build_options_default="gfx803 gfx900 gfx906 gfx908 gfx90a gfx940 gfx941 gfx942 gfx1010 gfx1011 gfx1012 gfx1030 gfx1031 gfx1100 gfx1101 gfx1102"
